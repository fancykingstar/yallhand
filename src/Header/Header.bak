import React from "react";
import { Icon, Label, Dropdown } from "semantic-ui-react";
import {inject, observer} from "mobx-react"
import {withRouter} from "react-router-dom"
import "./style.css";




@inject("TeamStore", "UserStore", "PoliciesStore")
@observer
class Header extends React.Component {
  constructor(props) {
    super(props)
  }
  componentDidMount() {
    const {TeamStore} = this.props
    TeamStore.loadStructure()
  }
  render() {
    const {TeamStore} = this.props
    const {UserStore} = this.props
    const allTeams = Object.keys(TeamStore.teamKey)
    const teamsDisplay = allTeams.map(team => ({label: TeamStore.teamKey[team], key: team, value: team}))
    const teamChange = (val) => {
      UserStore.setPreviewTeam(val)
      const {PoliciesStore} = this.props
         PoliciesStore.loadPolicies()
         PoliciesStore.getUserAvailablePolicies(UserStore.tempTeam)
      this.props.history.push('/portal')
    }
    const tempList = [1, 2, 3, 4]
    return (
      <div className="Header">
        <div className="AdminHeaderControls">
          <div className="Notification">
            <Label
              style={{ marginLeft: 11, marginTop: 8, position: "absolute" }}
              circular
              empty
              color="red"
            />
            <Icon color="grey" name="bell" size="large" />

          
              <Dropdown style={{marginLeft: 10}} text="Employee Portal" options={teamsDisplay} onChange={(e, {value}) => teamChange(value)}/>
        
          </div>
        </div>
        <div className="MobileMenu">
          <Icon name="bars" size="large" color="black" />
        </div>
      </div>
    );
  }
}
export default withRouter(Header)
