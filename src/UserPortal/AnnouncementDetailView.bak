import React from "react"
import "./style.css"
import { inject, observer } from "mobx-react";
import {  Header, Container, Image, Icon, Button, Grid} from 'semantic-ui-react'
import UTCtoFriendly from '../SharedCalculations/UTCtoFriendly'
import {DraftHTMLDisplay} from "../SharedCalculations/DraftHTMLDisplay"
import { AskAQuestion } from "./AskAQuestion"
import { Sentiment } from "./Sentiment"

@inject("AnnouncementsStore", "UIStore")
@observer
export class AnnouncementDetailView extends React.Component {

    componentDidMount() {
        const {UIStore} = this.props
        UIStore.set("portal", "sentimentComplete", false)
    }
    render() {
        const {AnnouncementsStore} = this.props
        const announcement = AnnouncementsStore._getAnnouncement(this.props.announcementID)
        return(
            <div className="Announcements">
                <Container>
                {announcement.img.length !== 0 ?  <Image rounded size="large" src={announcement.img}/> : null}
                    <Header
                    as="h2"
                    content={announcement.label}
                    subheader={UTCtoFriendly(announcement.updated).split(",")[0]}
                  />
    
                  <DraftHTMLDisplay storedState={announcement.variations[0].contentRAW}/>
                  </Container>
                <br/>
                <Grid>
                    <Grid.Row columns={2}>
                        <Grid.Column>
                            <Sentiment
                            type={"announcementID"}
                            ID={announcement.announcementID}
                            variationID={announcement.variations[0].variationID}
                            />
                        </Grid.Column>
                        <Grid.Column>
                            <AskAQuestion content={announcement}/>
                            </Grid.Column>
                    </Grid.Row>
                </Grid>
              
                   
                </div>
                

       

        )
    }
}




